import{S as i,i as c,s as d,a as _,y as m,W as p,h as r,c as f,z as l,b as u,A as g,H as h,g as C,d as S,B as $,o as y}from"../chunks/index.fdf84907.js";import{L as I}from"../chunks/Loading.a4841b1e.js";import{C as k,H as w,I as E,J as R,K as T,L as v,M as L,B as U,N as x,O as A,Q as D}from"../chunks/dataFetching.f2a9713f.js";function P(o){let t,a,n;return a=new I({}),{c(){t=_(),m(a.$$.fragment),this.h()},l(e){p("svelte-c77y3o",document.head).forEach(r),t=f(e),l(a.$$.fragment,e),this.h()},h(){document.title="Login"},m(e,s){u(e,t,s),g(a,e,s),n=!0},p:h,i(e){n||(C(a.$$.fragment,e),n=!0)},o(e){S(a.$$.fragment,e),n=!1},d(e){e&&r(t),$(a,e)}}}function b(o){return y(async()=>{const t=k(),a=new URLSearchParams;let n=A;t.state&&t.state==="account"&&(n=D),a.append("grant_type","authorization_code"),a.append("code",t.code),a.append("redirect_uri",n),a.append("client_id",w),a.append("code_verifier",E());let e=await R(a),s=await e.json();T(s.access_token),v(s.id_token),e=await L(s.access_token),s=await e.json(),U(s.csrf_token),x(),window.location.href=n}),[]}class B extends i{constructor(t){super(),c(this,t,b,P,d,{})}}export{B as component};
