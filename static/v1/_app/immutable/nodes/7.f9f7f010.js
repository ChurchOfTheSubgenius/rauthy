import{S as W,i as F,s as J,a as v,k as C,q as V,y as U,W as K,h as u,c as w,l as B,m as D,r as q,z as A,n as G,b as k,G as p,A as T,g as y,d as N,f as X,B as j,o as Y,V as z,u as Z,v as x}from"../chunks/index.fdf84907.js";import{C as ee,B as te,S as H,U as oe}from"../chunks/dataFetching.f2a9713f.js";import{B as M}from"../chunks/Button.80ee52cd.js";import{L as se}from"../chunks/Loading.a4841b1e.js";function Q(r){let t,o;return t=new se({}),{c(){U(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){T(t,e,n),o=!0},i(e){o||(y(t.$$.fragment,e),o=!0)},o(e){N(t.$$.fragment,e),o=!1},d(e){j(t,e)}}}function ne(r){let t;return{c(){t=V("LOGOUT")},l(o){t=q(o,"LOGOUT")},m(o,e){k(o,t,e)},d(o){o&&u(t)}}}function ae(r){let t;return{c(){t=V("CANCEL")},l(o){t=q(o,"CANCEL")},m(o,e){k(o,t,e)},d(o){o&&u(t)}}}function R(r){let t,o;return{c(){t=C("div"),o=V(r[0]),this.h()},l(e){t=B(e,"DIV",{class:!0});var n=D(t);o=q(n,r[0]),n.forEach(u),this.h()},h(){G(t,"class","svelte-1imr448"),z(t,"err",r[0])},m(e,n){k(e,t,n),p(t,o)},p(e,n){n&1&&Z(o,e[0]),n&1&&z(t,"err",e[0])},d(e){e&&u(t)}}}function le(r){let t,o,e,n,$,L,g,i,h,d,f,I,_,b,O,a=r[1]&&Q();f=new M({props:{level:2,$$slots:{default:[ne]},$$scope:{ctx:r}}}),f.$on("click",r[2]),_=new M({props:{level:4,$$slots:{default:[ae]},$$scope:{ctx:r}}}),_.$on("click",re);let l=r[0]&&R(r);return{c(){t=v(),a&&a.c(),o=v(),e=C("div"),n=C("h1"),$=V("Logout"),L=v(),g=C("div"),i=V("Do you really want to logout and end your session?"),h=v(),d=C("div"),U(f.$$.fragment),I=v(),U(_.$$.fragment),b=v(),l&&l.c(),this.h()},l(s){K("svelte-udls1j",document.head).forEach(u),t=w(s),a&&a.l(s),o=w(s),e=B(s,"DIV",{class:!0});var m=D(e);n=B(m,"H1",{});var E=D(n);$=q(E,"Logout"),E.forEach(u),L=w(m),g=B(m,"DIV",{});var P=D(g);i=q(P,"Do you really want to logout and end your session?"),P.forEach(u),h=w(m),d=B(m,"DIV",{class:!0});var S=D(d);A(f.$$.fragment,S),I=w(S),A(_.$$.fragment,S),S.forEach(u),b=w(m),l&&l.l(m),m.forEach(u),this.h()},h(){document.title="Logout",G(d,"class","btn svelte-1imr448"),G(e,"class","container svelte-1imr448")},m(s,c){k(s,t,c),a&&a.m(s,c),k(s,o,c),k(s,e,c),p(e,n),p(n,$),p(e,L),p(e,g),p(g,i),p(e,h),p(e,d),T(f,d,null),p(d,I),T(_,d,null),p(e,b),l&&l.m(e,null),O=!0},p(s,[c]){s[1]?a?c&2&&y(a,1):(a=Q(),a.c(),y(a,1),a.m(o.parentNode,o)):a&&(x(),N(a,1,1,()=>{a=null}),X());const m={};c&32&&(m.$$scope={dirty:c,ctx:s}),f.$set(m);const E={};c&32&&(E.$$scope={dirty:c,ctx:s}),_.$set(E),s[0]?l?l.p(s,c):(l=R(s),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(s){O||(y(a),y(f.$$.fragment,s),y(_.$$.fragment,s),O=!0)},o(s){N(a),N(f.$$.fragment,s),N(_.$$.fragment,s),O=!1},d(s){s&&u(t),a&&a.d(s),s&&u(o),s&&u(e),j(f),j(_),l&&l.d()}}}async function re(){window.location.href="/auth/v1"}function ie(r,t,o){let e="",n="",$=!1;Y(async()=>{const i=ee();n=i.post_logout_redirect_uri;const h=i.id_token_hint,d=i.state,f=window.document.getElementsByName("rauthy-csrf-token")[0].id;if(te(f),window.document.getElementsByName("rauthy-action")[0].id==="true"){o(1,$=!0);let b=await H({id_token_hint:h,post_logout_redirect_uri:n,state:d});await g(b)}});async function L(){o(1,$=!0);let i=await H({});await g(i)}async function g(i){if(i.ok)oe(),window.location.href=n;else{const h=await i.json();o(0,e=h.message),o(1,$=!1)}}return[e,$,L]}class de extends W{constructor(t){super(),F(this,t,ie,le,J,{})}}export{de as component};
